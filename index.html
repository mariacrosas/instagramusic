<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Embed Soundcloud clip</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src="js/libs/jquery-2.1.3.min.js"></script>
<script src="js/libs/d3.min.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>


<div id='map'></div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibWFyaWFjcm9zYXMiLCJhIjoiY2lremc0MnoxMDA3MXd4bTR6dWUyNGw0ZSJ9.9Bk_-nnYE7Xqaz1OXH2fFA';

var map = L.mapbox.map('map', 'mapbox.streets')
  .addControl(L.mapbox.geocoderControl('mapbox.places'))
  .setView([47.687579, -0.527344], 5);

// The GeoJSON representing a point feature with a property of 'sounds'
var geoJson = [{
      // Instagram1
        type: 'Feature',
        properties: {
            title: 'Eastside, Birmingham',
            'marker-color': '#f00',
            'marker-size': 'large',
            'marker-symbol': 'music',
            url: 'https://www.instagram.com/p/BJENHYjAAkA/',
            sounds: 'Odissea - Els Catarres <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/7140d9d34536abd6322b561648009cedbe7c342c" type="audio/mpeg"></iframe>'
        },
        geometry: {
            type: 'Point',
            coordinates: [-1.884237,52.479866]
        }
      },

        // Instagram2
        {
        type: 'Feature',
        properties: {
            title: 'Girona, City Centre',
            'marker-color': '#f00',
            'marker-size': 'large',
            'marker-symbol': 'music',
            url: 'https://www.instagram.com/p/BI5xOefg1iE/',
            sounds: 'Friday I am in love - Janet Devlin <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/65e9e4cb57ba21ee0bc73bd5bcdc3a58d3e00e8d" type="audio/mpeg"></iframe>'
        },
        geometry: {
            type: 'Point',
            coordinates: [2.8214264,41.9794005]
        }
      },
      // Instagram3
      {
      type: 'Feature',
      properties: {
          title: 'Palafrugell, Girona',
          'marker-color': '#f00',
          'marker-size': 'large',
          'marker-symbol': 'music',
          url: 'https://www.instagram.com/p/BI4jj5Zgixn/',
          sounds: 'Sota la llum del sol - Els Catarres <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/8f1b4f9e45174c865c69df9b0bf327fc12f8a2e2" type="audio/mpeg"></iframe>'
      },
      geometry: {
          type: 'Point',
          coordinates: [3.1629611,41.9179112]
      }
    },
    // Instagram4
    {
    type: 'Feature',
    properties: {
        title: 'Eastside, Birmingham',
        'marker-color': '#f00',
        'marker-size': 'large',
        'marker-symbol': 'music',
        url: 'https://www.instagram.com/p/BI5xOefg1iE/',
        sounds: 'Junts - Projecte Mut <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/b9f387f73620c48a4286609237d7dc01c15220e0" type="audio/mpeg"></iframe>'
    },
    geometry: {
        type: 'Point',
        coordinates: [-1.884237,52.479866]
    }
  },
  // Instagram5
  {
  type: 'Feature',
  properties: {
      title: 'Edgbaston Reservoir, Birmingham',
      'marker-color': '#f00',
      'marker-size': 'large',
      'marker-symbol': 'music',
      url: 'https://www.instagram.com/p/BI5xOefg1iE/',
      sounds: 'Do not stop believin - Journey <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/5908f4536c2b1111045c46555811fe61112d5c26" type="audio/mpeg"></iframe>'
  },
  geometry: {
      type: 'Point',
      coordinates: [-1.937094,52.479758]
  }
},
// Instagram6
{
type: 'Feature',
properties: {
    title: 'Cathedral Square, Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'L.I.F.E.G.O.E.S.O.N. - Noah and the Whale <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/ccbc5eb6dbd565c783cf6b9273d0d337c234474f" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.8985429,52.4811604]
}
},
// Instagram7
{
type: 'Feature',
properties: {
    title: 'Birmingham Canals',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: '5 Years Time - Noah and the Whale <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/1f97d1a75cacb29fa67c6c8ff1bb3dd097592742" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.914116,52.476773]
}
},
// Instagram8
{
type: 'Feature',
properties: {
    title: 'Birmingham Canals',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Blowin in the Wind - Bob Dylan <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/fc1dd43539f9fbdaa17a4b012d61d50864e6f1fa" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.914116,52.476773]
}
},
// Instagram9
{
type: 'Feature',
properties: {
    title: 'Barcelona, City Centre',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Temptacions de Collserola - Manel <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/b6b4ee7cf25089bc80b908e33232eaf205b195d2" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [2.1734035,41.3850639]
}
},
// Instagram10
{
type: 'Feature',
properties: {
    title: 'Digbeth, Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Lets Have a Party Tonight - Wanda Jackson <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/aaf0d8348e672f4e15870ac1866fc066fd49b0ec" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.887119,52.475256]
}
},
// Instagram11
{
type: 'Feature',
properties: {
    title: 'Eastside, Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Common People - The Pulp <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/12ee216b0cee407d7271695cc83270d7ab872919" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.8871191,52.479866]
}
},
// Instagram12
{
type: 'Feature',
properties: {
    title: 'Grand Central, Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'BBVA - Manel <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/320b0effa4489f12a8367e3167a0a02985def453" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.898537,52.479139]
}
},
// Instagram13
{
type: 'Feature',
properties: {
    title: 'Eastside, Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Last Nite - The Strokes <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/dd2111a218b3007e3e23a6be300a87f02aee045a" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.884237,52.479866]
}
},
// Instagram14
{
type: 'Feature',
properties: {
    title: 'Birmingham',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Home - Max Jury <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/1a8ef5df2f673db5b14d9af606fb318a964f4210" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [-1.884237,52.479866]
}
},
// Instagram15
{
type: 'Feature',
properties: {
    title: 'Pla√ßa Catalunya, Barcelona',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'Summertime - The Mogwlis <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/f1d83f9ed0eb7f5595a1770505034ef0e7369109" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [2.1697722,41.386655]
}
},
// Instagram16
{
type: 'Feature',
properties: {
    title: 'Tossa de Mar, Girona',
    'marker-color': '#f00',
    'marker-size': 'large',
    'marker-symbol': 'music',
    url: 'https://www.instagram.com/p/BI5xOefg1iE/',
    sounds: 'La Gent Normal - Manel versioning The Pulp - Common People <iframe width="100%" height="50" scrolling="no" frameborder="no" src="https://p.scdn.co/mp3-preview/12ee216b0cee407d7271695cc83270d7ab872919" type="audio/mpeg"></iframe>'
},
geometry: {
    type: 'Point',
    coordinates: [2.9303675,41.7224989]
}
}
];

var myLayer = L.mapbox.featureLayer().addTo(map);

// Add the iframe in a custom popup using the custom feature properties
myLayer.on('layeradd', function(e) {
    var marker = e.layer,
        feature = marker.feature;

    // Create custom popup content
    var popupContent =  '<a target="_blank" class="popup" href="' +
        feature.properties.url + '">' +
        feature.properties.sounds +
        '<h2>' + feature.properties.title + '</h2>' + '</a>'

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    });
});

// Add features to the map
myLayer.setGeoJSON(geoJson);


</script>


</body>
</html>
